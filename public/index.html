<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waybe.in | Future-Ready Domains</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script> tailwind.config = { darkMode: 'class' } </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap');
        body { font-family: 'Outfit', sans-serif; transition: background-color 0.5s ease, color 0.5s ease; }
        .glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(16px); border: 1px solid rgba(0, 0, 0, 0.05); }
        .dark .glass { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); }
        .gradient-text { background: linear-gradient(135deg, #4f46e5, #ec4899, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .bg-grid { background-image: linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.05) 1px, transparent 1px); background-size: 40px 40px; mask-image: radial-gradient(circle at center, black 40%, transparent 100%); }
        .dark .bg-grid { background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px); }
        .tilt-card { transition: transform 0.3s ease; perspective: 1000px; }
        .tilt-card:hover { transform: translateY(-5px); }
    </style>
</head>
<body class="text-gray-900 bg-gray-50 dark:text-white dark:bg-[#0a0a0a] relative">

    <div class="fixed inset-0 pointer-events-none overflow-hidden">
        <div class="absolute inset-0 bg-grid opacity-60"></div>
        <div class="absolute top-0 left-0 w-96 h-96 bg-purple-600/10 dark:bg-purple-600/20 rounded-full blur-[100px]"></div>
    </div>

    <nav class="w-full fixed top-0 z-50 py-4 backdrop-blur-md border-b border-transparent dark:border-white/5">
        <div class="max-w-7xl mx-auto px-6 flex justify-between items-center">
            <div class="text-2xl font-extrabold flex items-center">
                <i class="fa-brands fa-hive text-indigo-600 dark:text-indigo-500 mr-2"></i> waybe.in
            </div>
                        <div class="flex items-center space-x-4">
                <button onclick="toggleTheme()" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-white/10 transition">
                    <i id="themeIcon" class="fa-solid fa-sun text-yellow-500"></i>
                </button>
                
                <a href="dashboard.html" class="px-5 py-2 rounded-full bg-indigo-600 text-white font-bold text-sm hover:bg-indigo-500 transition shadow-lg shadow-indigo-500/30">
                    Sign In
                </a>
            </div>

        </div>
    </nav>

    <section class="min-h-screen flex flex-col justify-center items-center text-center px-4 pt-24 relative">
        <span class="inline-flex items-center px-4 py-2 mb-8 rounded-full border border-purple-500/30 bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-300 text-xs font-bold tracking-wide">
            NEW: 15-DAY TRIAL ACTIVE
        </span>
        <h1 class="text-5xl md:text-7xl font-extrabold mb-6 text-gray-900 dark:text-white">
            Define Your <span class="gradient-text">Digital Identity</span>
        </h1>
        
        <div class="w-full max-w-2xl mt-8 relative z-20">
            <div class="glass p-2 rounded-full flex items-center shadow-xl">
                <div class="pl-6 text-gray-400"><i class="fa-solid fa-magnifying-glass"></i></div>
                <input type="text" id="domainInput" placeholder="Search domain..." class="flex-grow bg-transparent text-gray-800 dark:text-white px-4 py-4 outline-none font-medium">
                <button onclick="searchDomain()" class="bg-indigo-600 px-8 py-4 rounded-full text-white font-bold hover:bg-indigo-500 transition">Search</button>
            </div>
            <div id="searchResult" class="w-full mt-4 hidden"></div>
        </div>
    </section>

    <section class="py-20 px-6">
        <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="tilt-card glass p-8 rounded-[2rem]">
                <h3 class="text-2xl font-bold mb-2">Starter</h3>
                <p class="text-gray-500 text-sm mb-6">Standard domains.</p>
                <button onclick="openModal('Starter')" class="w-full py-3 rounded-xl border border-gray-300 dark:border-gray-700 font-bold hover:bg-gray-100 dark:hover:bg-white/5 transition">Select</button>
            </div>
            
            <div class="tilt-card glass p-8 rounded-[2rem] border-purple-500/50 bg-purple-50 dark:bg-purple-900/10 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl">FREE TRIAL</div>
                <h3 class="text-2xl font-bold mb-2">15-Day Trial</h3>
                <p class="text-purple-600 dark:text-purple-300 text-sm mb-6">Random domain for 15 days.</p>
                <button onclick="openModal('Free Trial')" class="w-full py-3 rounded-xl bg-purple-600 text-white font-bold hover:bg-purple-500 transition shadow-lg shadow-purple-500/30">Start Free Trial</button>
            </div>

            <div class="tilt-card glass p-8 rounded-[2rem]">
                <h3 class="text-2xl font-bold mb-2">Pro</h3>
                <p class="text-gray-500 text-sm mb-6">Premium extensions.</p>
                <button onclick="openModal('Pro')" class="w-full py-3 rounded-xl border border-gray-300 dark:border-gray-700 font-bold hover:bg-gray-100 dark:hover:bg-white/5 transition">Select</button>
            </div>
        </div>
    </section>

    <div id="signupModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/80 backdrop-blur-sm px-4">
        <div class="bg-white dark:bg-gray-900 p-8 rounded-3xl w-full max-w-md relative border border-white/10 shadow-2xl">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-500 hover:text-white"><i class="fa-solid fa-xmark text-xl"></i></button>
            
            <h2 class="text-2xl font-bold mb-2 text-gray-900 dark:text-white">Claim Your Domain</h2>
            <p class="text-sm text-gray-500 mb-6">Enter your email to activate the <span id="planName" class="text-purple-500 font-bold"></span>.</p>
            
            <input type="email" id="userEmail" placeholder="Enter your email" class="w-full bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 mb-4 text-gray-900 dark:text-white outline-none focus:border-indigo-500 transition">
            
            <button onclick="registerUser()" id="submitBtn" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-xl transition shadow-lg">
                Activate Now
            </button>
            <p id="msg" class="text-center mt-4 text-sm font-medium"></p>
        </div>
    </div>

    <script>
        // 1. Theme Logic
        const html = document.documentElement;
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) html.classList.add('dark');
        function toggleTheme() {
            html.classList.toggle('dark');
            localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
        }

        // 2. Modal Logic
        let selectedPlan = "";
        function openModal(plan) {
            selectedPlan = plan;
            document.getElementById('planName').innerText = plan;
            document.getElementById('signupModal').classList.remove('hidden');
        }
        function closeModal() {
            document.getElementById('signupModal').classList.add('hidden');
            document.getElementById('msg').innerText = "";
        }

        // 3. DATABASE CONNECTION (The Magic)
        async function registerUser() {
            const email = document.getElementById('userEmail').value;
            const btn = document.getElementById('submitBtn');
            const msg = document.getElementById('msg');
            
            if (!email.includes('@')) { msg.innerText = "Please enter a valid email."; msg.className="text-red-500 text-center mt-4 text-sm"; return; }

            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Processing...';
            
            try {
                // Send data to YOUR server (server.js)
                const response = await fetch('/api/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        email: email, 
                        plan: selectedPlan,
                        domain: "Random-Trial-" + Math.floor(Math.random()*1000) 
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    msg.innerText = "ðŸŽ‰ Success! Check your inbox.";
                    msg.className = "text-green-500 text-center mt-4 text-sm";
                    btn.innerText = "Registered!";
                    setTimeout(closeModal, 2000);
                } else {
                    msg.innerText = "Error: " + data.message;
                    msg.className = "text-red-500 text-center mt-4 text-sm";
                    btn.innerText = "Try Again";
                }
            } catch (err) {
                console.error(err);
                msg.innerText = "Server Error. Try again later.";
                btn.innerText = "Try Again";
            }
        }

        // 4. Search Logic
        async function searchDomain() {
            const domain = document.getElementById('domainInput').value;
            const result = document.getElementById('searchResult');
            if(domain.length < 3) return;
            
            result.innerHTML = '<div class="text-center text-gray-500"><i class="fa-solid fa-circle-notch fa-spin"></i> Checking availability...</div>';
            result.classList.remove('hidden');

            try {
                const res = await fetch('/api/search-domain', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ domain })
                });
                const data = await res.json();
                
                if (data.available) {
                    result.innerHTML = `<div class="bg-green-500/10 border border-green-500/50 p-4 rounded-xl flex justify-between items-center"><span class="text-green-600 font-bold">${data.domain} is available!</span> <button class="bg-green-600 text-white px-4 py-1 rounded-lg text-sm" onclick="openModal('Buy ${data.domain}')">Buy</button></div>`;
                } else {
                    result.innerHTML = `<div class="bg-red-500/10 border border-red-500/50 p-4 rounded-xl text-red-600 font-bold">${data.domain} is taken.</div>`;
                }
            } catch (e) { result.innerHTML = "Error connecting to server."; }
        }
    </script>
</body>
</html>

